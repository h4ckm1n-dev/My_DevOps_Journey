There are four main ways to install Semaphore: Snap, Package Manager, Docker, and Binary file. i will use binaries and docker for MySQL installation on [[Setting up WSL on windows#Step 0: Install Windows Subsystem for Linux (WSL-Subsystem)|WSL-Subsystem]]
`
**1. Package Manager Installation:**

- Python, Ansible and Git should be installed on your system. Download the package file from the [Releases page](https://github.com/ansible-semaphore/semaphore/releases). Here are several installation commands, depending on the package manager:

For Debian/Ubuntu (x64):
```bash
wget https://github.com/ansible-semaphore/semaphore/releases/download/v2.8.75/semaphore_2.8.75_linux_amd64.deb
sudo dpkg -i semaphore_2.8.75_linux_amd64.deb
```

For CentOS (x64):
```bash
wget https://github.com/ansible-semaphore/semaphore/releases/download/v2.8.75/semaphore_2.8.75_linux_amd64.rpm
sudo yum install semaphore_2.8.75_linux_amd64.rpm
```

- Setup Semaphore by using the following command: `semaphore setup`
- Now you can run Semaphore: `semaphore service --config=./config.json`
- Semaphore will be available via this URL `https://localhost:3000`.

First, you need to install Docker on your Ubuntu WSL. Here's a brief guide:

1. Update your Ubuntu packages: `sudo apt update`
2. Install Docker: `sudo apt install docker.io docker-compose` 
3. Start and automate Docker: `sudo service docker start
4. Follow the docker installation part

**3 Docker Installation:**

- Create a `docker-compose.yml` file with the following content:
```yml
version: '3'
services:
  mysql:
    restart: unless-stopped
    ports:
      - 3306:3306
    image: mysql:8.0
    hostname: mysql
    volumes:
      - semaphore-mysql:/var/lib/mysql
    environment:
      MYSQL_RANDOM_ROOT_PASSWORD: 'yes'
      MYSQL_DATABASE: semaphore
      MYSQL_USER: semaphore
      MYSQL_PASSWORD: semaphore
volumes:
  semaphore-mysql:
```

- Run the following command to start MySQL database (MySQL or Postgres): `docker-compose up`

## Now configure semaphore using :

```bash
semaphore setup
```
	Follow setup instruction as needed

Then start semaphore using:
```bash
nohup semaphore server --config "<your_folder"/config.json &
```

- Semaphore will be available via the following URL `https://localhost:3000` using localhost:3000 user = admin `password` = `changeme`

For more detailed information, you can refer to the [official Semaphore documentation](https://ln.keymate.ai/lHdLq7).

Please note that you might need to adjust these instructions based on your specific system configuration and requirements.

# Run our first playbook in semaphore

1. **Login to Semaphore:** Open a web browser and navigate to `http://localhost:3000` (replace `localhost` with the IP address or hostname of your server if you're accessing it from a different machine). Login with the admin credentials you created during the installation process.
    
2. **Create a Project:** Once logged in, you'll need to create a new project. Click on the `Projects` tab on the left sidebar, then click on the `+` button to create a new project. Enter a name and description for your project and click `Create`.
    
3. **Add an Inventory:** An inventory is a collection of hosts (servers) that your playbook will run against. Click on the `Inventory` tab on the left sidebar, then click on the `+` button to create a new inventory. Enter a name and description, then click `Create`. Once the inventory is created, you can add hosts to it by clicking on the `+` button in the `Hosts` section.
    
4. **Add a Repository:** A repository is where your Ansible playbooks are stored. Click on the `Repositories` tab on the left sidebar, then click on the `+` button to add a new repository. Enter the URL of your Git repository where your playbooks are stored, and any necessary authentication information. Click `Create` to add the repository.
    
5. **Create a Template:** A template is a predefined set of configurations for running a playbook. Click on the `Templates` tab on the left sidebar, then click on the `+` button to create a new template. Select the repository and playbook you want to use, the inventory, and any additional options you want to set (like extra variables, or whether to run the playbook in debug mode). Click `Create` to create the template.
    
6. **Run the Playbook:** Now that everything is set up, you can run your playbook. Click on the `Templates` tab on the left sidebar, then find the template you just created. Click on the `Run` button next to the template to start running the playbook. You'll be taken to a new page where you can see the output of the playbook as it runs.!

## you can use Logstash to monitor the logs of Semaphore and send them to Elasticsearch for visualization in Kibana. Here's an outline of the steps involved:

1. **Configure Logstash Input:** Set up Logstash to monitor the log files generated by Semaphore. You can use the `file` input plugin in your Logstash configuration file to specify the path to the log file(s) you want to monitor. For example:
    ```ruby
    input {
  file {
    path => "/path/to/semaphore/logs/*.log"
    start_position => "beginning"
  }
}
```
    
    Adjust the `path` parameter to point to the actual log file(s) generated by Semaphore.
    
2. **Apply Filters:** Use Logstash filters to parse and transform the log data as needed. You can use built-in filters like `grok` to extract structured fields from the log lines, or other filters like `date`, `mutate`, or `anonymize` to modify the log data based on your requirements.
    
3. **Configure Output:** Specify Elasticsearch as the output destination in your Logstash configuration. Set the `hosts` parameter to point to your Elasticsearch instance. For example:

    ```ruby
    output {
  elasticsearch {
    hosts => ["https://your-elasticsearch-host:9200"]
    index => "semaphore-logs"
  }
}
```
    
    Customize the `hosts` parameter to match the URL or IP address of your Elasticsearch cluster. The `index` parameter defines the name of the Elasticsearch index where the logs will be stored.
    
4. **Run Logstash:** Start Logstash with the configured configuration file using the `bin/logstash -f <config-file>` command. Logstash will continuously monitor the Semaphore log files, apply the specified filters, and send the transformed logs to Elasticsearch.
    
5. **Visualize Logs in Kibana:** Once the logs are successfully indexed in Elasticsearch, you can access them in Kibana. Open Kibana in your web browser, navigate to the "Discover" page, and select the index pattern corresponding to your Semaphore logs. From there, you can explore, search, and visualize the log data using Kibana's powerful features.
    

By using Logstash as an intermediary between Semaphore and Elasticsearch, you can enhance and transform the log data before it's stored in Elasticsearch, making it more suitable for analysis and visualization in Kibana.

Please note that you may need to adjust the Logstash configuration and filters based on the specific log format of Semaphore and your desired transformations.